<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;Recompiling the sources</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.73.1"><link rel="start" href="index.html" title="doc_kit, a toolkit for Scilab documentation writers"><link rel="up" href="index.html" title="doc_kit, a toolkit for Scilab documentation writers"><link rel="prev" href="ch05.html" title="Chapter&nbsp;5.&nbsp;The command-line tools"><link rel="next" href="ch07.html" title="Chapter&nbsp;7.&nbsp;Companion tools"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;6.&nbsp;Recompiling the sources</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch07.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="build"></a>Chapter&nbsp;6.&nbsp;Recompiling the sources</h2></div></div></div><p>Directory <code class="literal">doc_kit/src/org/scilab/doc_kit/</code> contains the source code of two utility classes needed by some of the above command-line tools:</p><div class="variablelist"><dl><dt><span class="term">HelpViewer.java</span></dt><dd><p>The source code of <a class="link" href="ch05.html#sciviewhelp"><code class="literal">sciviewhelp</code></a>.</p></dd><dt><span class="term">CopyConvert.java</span></dt><dd><p>A preprocessor used as the first pass in <a class="link" href="ch05.html#sci2html"><code class="literal">sci2html</code></a>, <a class="link" href="ch05.html#sci2chm"><code class="literal">sci2chm</code></a>, <a class="link" href="ch05.html#sci2jh"><code class="literal">sci2jh</code></a> and <a class="link" href="ch05.html#sci2pdf"><code class="literal">sci2pdf</code></a>.</p><p>This preprocessor:</p><div class="itemizedlist"><ul type="disc"><li><p>Creates a ``flat' (entity references are expanded; <a class="link" href="http://www.w3.org/TR/xinclude/">XIncludes</a> are not supported) copy of the XML document to be transformed.</p></li><li><p>If the source document contains an embedded MathML element (<code class="literal">imagedata/mml:math</code>), this element is extracted to a temporary file, then the temporary file is converted to a PNG image by the means of <a class="link" href="http://jeuclid.sourceforge.net/">JEuclid</a>. After doing this, the original <code class="literal">imagedata/mml:math</code> found in the source is replaced in the flat XML document by an <code class="literal">imagedata</code> element pointing to the generated PNG file (<code class="literal">imagedata/@fileref</code>).</p></li><li><p>Same for embedded SVG elements which are converted to PNG images by the means of <a class="link" href="http://xmlgraphics.apache.org/batik/">Batik</a>.</p></li><li><p>If the source document contains an <code class="literal">imagedata</code> element pointing to a MathML file (filename extension is "<code class="literal">.mml</code>"), this file is converted to PNG by the means of <a class="link" href="http://jeuclid.sourceforge.net/">JEuclid</a>. After doing that, the <code class="literal">imagedata</code> element contained in the flat XML document is made to point to the <code class="literal">.png</code> file rather than to the <code class="literal">.mml</code> file.</p></li><li><p>Same for <code class="literal">imagedata</code> elements pointing to SVG files (filename extension is "<code class="literal">.svg</code>" or "<code class="literal">.svgz</code>"), but in this case, it is <a class="link" href="http://xmlgraphics.apache.org/batik/">Batik</a> which is used to perform the conversion.</p></li><li><p>Same for <code class="literal">imagedata</code> elements pointing to "<code class="literal">.tex</code>" files (assumed to contain math equations), but in this case, it is <a class="link" href="http://www.tug.org/">T<sub>E</sub>X</a>+<a class="link" href="http://pages.cs.wisc.edu/~ghost/">Ghostscript</a> which are used to perform the conversion.</p><p>The <code class="literal">CopyConvert</code> preprocessor searches the following programs in the <code class="literal">PATH</code>: <code class="literal">latex</code>, <code class="literal">dvips</code>, <code class="literal">gs</code> on Unix/<code class="literal">gswin32c</code> on Windows, <code class="literal">ps2pdf</code>.</p></li></ul></div></dd></dl></div><p>The above sources may be recompiled by running <a class="link" href="http://ant.apache.org/">ant</a> in the <code class="literal">doc_kit/src/</code> directory:</p><pre class="programlisting">C:\doc_kit/src&gt; dir /w
...
build.xml   [org]       [class]
...
C:\doc_kit/src&gt; ant
Buildfile: build.xml

init:

compile:
...</pre><p>Doing this rebuilds <code class="literal">sci_doc_kit.jar</code> in <code class="literal">doc_kit/lib/</code>.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch07.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;The command-line tools&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;Companion tools</td></tr></table></div></body></html>