<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Switch2 </TITLE>
<META NAME="description" CONTENT="Switch2 ">
<META NAME="keywords" CONTENT="main">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="main.css">

</HEAD>

<BODY bgcolor="#FFFFFF">

<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html3606"
  HREF="SWITCH2.htm#SECTION00538100000000000000">Library</A>
<LI><A NAME="tex2html3607"
  HREF="SWITCH2.htm#SECTION00538200000000000000">Description</A>
<LI><A NAME="tex2html3608"
  HREF="SWITCH2.htm#SECTION00538300000000000000">Dialog Box</A>
<LI><A NAME="tex2html3609"
  HREF="SWITCH2.htm#SECTION00538400000000000000">Default properties</A>
<LI><A NAME="tex2html3610"
  HREF="SWITCH2.htm#SECTION00538500000000000000">Interfacing function</A>
<LI><A NAME="tex2html3611"
  HREF="SWITCH2.htm#SECTION00538600000000000000">Computational function (type 4)</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H2><A NAME="SECTION00538000000000000000"></A><A NAME="SWITCH2"></A>
<BR>
Switch2 
</H2>
<DIV ALIGN="CENTER">
<!-- MATH
 $\epsfig{file=SWITCH2.eps,width=90.00pt}$
 -->
<IMG
 WIDTH="143" HEIGHT="161" ALIGN="BOTTOM" BORDER="0"
 SRC="img67.gif"
 ALT="\epsfig{file=SWITCH2.eps,width=90.00pt}">
</DIV>
<H3><font color="blue"><A NAME="SECTION00538100000000000000">
Library</A>
</font></H3>
Branching

<H3><font color="blue"><A NAME="SECTION00538200000000000000">
Description</A>
</font></H3>
The Switch block passes through the first (top) input or the third
(bottom) input based on the value of the second (middle) input. The
first and third inputs are called data inputs. The second input is
called the control input. You select the conditions under which the
first input is passed with the Criteria for passing first input
parameter. You can make the block check whether the control input is
greater than or equal to the threshold value, purely greater than the
threshold value, or nonzero. If the control input meets the condition
set in the Criteria for passing first input parameter, then the first
input is passed. Otherwise, the third input is passed. 

<H3><font color="blue"><A NAME="SECTION00538300000000000000">
Dialog Box</A>
</font></H3>
<DIV ALIGN="CENTER">
<TABLE CELLPADDING=3 BORDER="1">
<TR><TD ALIGN="CENTER">Set parameters</TD>
<TD></TD>
</TR>
<TR><TD ALIGN="CENTER">pass first input if: u2<IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img2.gif"
 ALT="$ &gt;$">=a (0), u2<IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img2.gif"
 ALT="$ &gt;$">a (1), u2&nbsp;=a (2)</TD>
<TD ALIGN="CENTER">0</TD>
</TR>
<TR><TD ALIGN="CENTER">threshold a</TD>
<TD ALIGN="CENTER">0</TD>
</TR>
<TR><TD ALIGN="CENTER">use zero crossing: yes (1), no (0)</TD>
<TD ALIGN="CENTER">1</TD>
</TR>
</TABLE>
</DIV>

<UL>
<LI>pass first input if: u2<IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img2.gif"
 ALT="$ &gt;$">=a : Select the conditions under
  which the first input is passed. You can make the block check
  whether the control input is greater than or equal to the threshold
  value, purely greater than the threshold value, or nonzero. If the
  control input meets the condition set in this parameter, then the
  first input is passed. Otherwise, the third input is passed. 
</LI>
<LI>threshold a:Assign the switch threshold that determines which
  input is passed to the output. 
</LI>
<LI>use zero crossing: yes : Select to enable zero crossing detection. 
</LI>
</UL>

<H3><font color="blue"><A NAME="SECTION00538400000000000000">
Default properties</A>
</font></H3>

<UL>
<LI>always active: no
</LI>
<LI>direct-feedthrough: yes
</LI>
<LI>zero-crossing: yes
</LI>
<LI>mode: yes
</LI>
<LI>number/sizes of inputs: 3 / -1  1  -1
</LI>
<LI>number/sizes of outputs: 1 / -1
</LI>
<LI>number/sizes of activation inputs: 0 / 
</LI>
<LI>number/sizes of activation outputs: 0 / 
</LI>
<LI>continuous-time state: no
</LI>
<LI>discrete-time state: no
</LI>
<LI>name of computational function: <EM>switch2</EM>
</LI>
</UL>
<H3><font color="blue"><A NAME="SECTION00538500000000000000">
Interfacing function</A>
</font></H3>
<TT>scilab/macros/scicos_blocks/branching/SWITCH2.sci</TT>

<H3><font color="blue"><A NAME="SECTION00538600000000000000">
Computational function (type 4)</A>
</font></H3>
<BR>
<PRE>#include "scicos_block.h"
#include &lt;math.h&gt;

void  switch2(scicos_block *block,int flag)
{
  int i,j,phase;
  if (flag == 1) {
    phase=get_phase_simulation();
    if (phase==1){
      i=2;
      if (*block-&gt;ipar==0){
	if (*block-&gt;inptr[1]&gt;=*block-&gt;rpar) i=0;
      }else if (*block-&gt;ipar==1){
	if (*block-&gt;inptr[1]&gt;*block-&gt;rpar) i=0;
      }else {
	if (*block-&gt;inptr[1]!=*block-&gt;rpar) i=0;			     
      }
    }else{
      if(block-&gt;mode[0]==1){
	i=0;
      }else if(block-&gt;mode[0]==2){
	i=2;
      }
    }
    for (j=0;j&lt;block-&gt;insz[0];j++) {
      block-&gt;outptr[0][j]=block-&gt;inptr[i][j];
    }
  }else if(flag == 9){
    phase=get_phase_simulation();
    block-&gt;g[0]=*block-&gt;inptr[1]-(*block-&gt;rpar);
    if (phase==1){
      i=2;
      if (*block-&gt;ipar==0){
	if (block-&gt;g[0]&gt;=0.0) i=0;
      }else if (*block-&gt;ipar==1){
	if (block-&gt;g[0]&gt;0.0) i=0;
      }else {
	if (block-&gt;g[0]!=0.0) i=0;			     
      }
      if(i==0) {
	block-&gt;mode[0]=1;
      }else{
	block-&gt;mode[0]=2;
      }
    }
  }
}
</PRE>
<HR>
<ADDRESS>
Ramine Nikoukhah
2004-06-22
</ADDRESS>
</BODY>
</HTML>
