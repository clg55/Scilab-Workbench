 
clear;lines(0);
 
//Real case: 1x1 and 2x2 blocks
 
a=rand(5,5);[ab,x,bs]=bdiag(a);ab
 ab  =
 
!   2.4777836    0.           0.           0.           0.        !
!   0.           0.0752666    0.4859615    0.           0.        !
!   0.         - 0.5787591  - 0.1244184    0.           0.        !
!   0.           0.           0.           0.0696540    0.        !
!   0.           0.           0.           0.           0.5341598 !
 
//Complex case: complex 1x1 blocks
 
[ab,x,bs]=bdiag(a+%i*0);ab
 ab  =
 
 
         column 1 to 3
 
!   2.4777836    0                         0                      !
!   0          - 0.0245759 + 0.5208514i    0                      !
!   0            0                       - 0.0245759 - 0.5208514i !
!   0            0                         0                      !
!   0            0                         0                      !
 
         column 4 to 5
 
!   0                         0         !
!   0                         0         !
!   0                         0         !
!   0.0696540 - 6.934D-18i    0         !
!   0                         0.5341598 !
 
