#!/bin/sh
 
for i in $*
do
        sed -n -e '/^.SH *NAME */,/^./p' $i |sed -n -e '2p'
done  |\
sed	-e 's/\\(em/-/'		\
	-e 's/\\(hy/-/'		\
	-e 's/\\(mi/-/'		\
	-e 's/ \\- / @/'        \
	-e 's/\\- /@/'		\
	-e 's/  *- / @/'	\
	-e 's/- /@/'		\
	-e 's/ VAX-11//'	\
	-e 's/\.[iI]X *"[^"]*" *"[^"]*" *"[^"]*" *"[^"]*" *//g' \
	-e 's/\.[iI]X *"[^"]*" *"[^"]*" *"[^"]*" *//g'          \
	-e 's/\.[iI]X *"[^"]*" *"[^"]*" *//g'                   \
	-e 's/\.[iI]X *"[^"]*" *//g'                            \
	-e 's/\.cS .*\.cE//'    \
	-e 's/\.PP *//g'	\
	-e 's/\.B *//g'		\
	-e 's/\.rS *//g'	\
	-e 's/\.gL *".*"//g'	\
	-e 's/\.br *//g'	\
	-e 's/\.nL *//g'        \
	-e 's/\\&//g'		\
	-e 's/"" *//g'		\
	-e 's/\.UC [0-9]//g'	\
	-e 's/"\([0-9]*\)"/\1/g' \
	-e 's/"LOCAL"/LOCAL/g'	\
	-e 's/"//g'		\
	-e 's/	\\f[PRIB0123] */	/g' \
	-e 's/\\f[PRIB0123]//g'	\
	-e 's/\\s[-+0-9]*//g'	\
	-e 's/\\\*[LO]//g'	\
	-e 's/\\\//\//g'	\
	-e 's/.TH *[^ ][^ ]* \([^ 	]*\).*	\([^@]*\)@/\2(\1)	- /' \
	-e 's/@/- /'		\
	-e 's/	 /	/g' |\
sort -u >whatis
