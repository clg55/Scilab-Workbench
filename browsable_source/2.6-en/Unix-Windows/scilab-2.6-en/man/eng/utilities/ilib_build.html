<html>
  <body bgcolor="FFFFFF">
    <CENTER>Scilab Function  </CENTER>
    <P></P>
    <H3>NAME </H3>
    <p>
      <ul>ilib_build -  utility for shared library management  </ul>
    </p>
    <H3>CALLING SEQUENCE</H3>
    <dl>
      <dd>ilib_build(lib_name,table,files,libs [,makename])  </dd>
    </dl>
    <H3>PARAMETERS</H3>
    <ul>
      <ul>
  <li>
          <tt>
            <b>lib_name  </b>
          </tt>
    : a character string, the generic name of the library without path and extension.
  </li>
  <li>
          <tt>
            <b>table  </b>
          </tt>
    : 2 column string matrix giving the table of pairs 'scilab-name', 'interface name'
  </li>
  <li>
          <tt>
            <b>files  </b>
          </tt>
    : string matrix giving objects files needed for shared library creation
  </li>
  <li>
          <tt>
            <b>libs  </b>
          </tt>
    : string matrix giving extra libraries needed for shred library creation
  </li>
  <li>
          <tt>
            <b>makename  </b>
          </tt>
    : character string. The path of the Makefile file without extension.
  </li>
 </ul>
    </ul>
    <H3>DESCRIPTION</H3>
    <ul>
  <p>
    This tool is used to create shared libraries and to generate a 
    loader file which can be used to dynamically load the shared library 
    into Scilab with <tt>
          <b>addinter</b>
        </tt>
  </p>
  <p>
    Many examples are provided in <tt>
          <b>examples/interface-tour-so</b>
        </tt>
    directory. 
  </p>
  <p>
  </p>
  </ul>
    <H3>EXAMPLES</H3>
    <ul>
      <pre>
//Here with give a complete example on adding new primitive to Scilab
//create the procedure files
f1=['extern double fun2();'
    'void fun1(x,y)'
    'double *x, *y;'
    '{*y=fun2(*x)/(*x);}'];

mputl(f1,'fun1.c')

f2=['#include &lt;math.h&gt;'
    'double fun2(x)'
    'double x;'
    '{ return( sin(x+1.));}'];
mputl(f2,'fun2.c');

//creating the interface file
i=['#include ""stack-c.h""'
   'extern int fun1 _PARAMS(( double *x, double *y));'
   'int intfun1(fname)' 
   'char * fname;'
   '{'
   '  int m1,n1,l1;'
   '  CheckRhs(1,1);'
   '  CheckLhs(1,1);'
   '  GetRhsVar(1, ""d"", &amp;m1, &amp;n1, &amp;l1);'
   '  fun1(stk(l1),stk(l1));'
   '  LhsVar(1) = 1;'
   '  return 0;'
   '}'];
mputl(i,'intfun1.c')

//creating the shared library (a gateway, a Makefile and a loader are 
//generated. 

files=['fun1.o','fun2.o','intfun1.o'];
ilib_build('foo',['scifun1','intfun1'],files,[]);

// load the shared library 

exec loader.sce 

//using the new primitive
scifun1(33)
 </pre>
    </ul>
    <H3>SEE ALSO</H3>
    <p>
      <ul>
        <a href="../functions/addinter.html">
          <tt>
            <b>addinter</b>
          </tt>
        </a>
        <a href="c_link.html">
          <tt>
            <b>link</b>
          </tt>
        </a>
        <a href="ilib_compile.html">
          <tt>
            <b>ilib_compile</b>
          </tt>
        </a>
        <a href="ilib_gen_Make.html">
          <tt>
            <b>ilib_gen_Make</b>
          </tt>
        </a>
        <a href="ilib_gen_gateway.html">
          <tt>
            <b>ilib_gen_gateway</b>
          </tt>
        </a>
        <a href="ilib_gen_loader.html">
          <tt>
            <b>ilib_gen_loader</b>
          </tt>
        </a>
        <a href="ilib_for_link.html">
          <tt>
            <b>ilib_for_link</b>
          </tt>
        </a>
      </ul>
    </p>
  </body>
</html>