<html>
  <body bgcolor="FFFFFF">
    <CENTER>Scilab Function  </CENTER>
    <P></P>
    <H3>NAME </H3>
    <p>
      <ul>link -  dynamic link  </ul>
    </p>
    <H3>CALLING SEQUENCE</H3>
    <dl>
      <dd>link(files, sub-name)  </dd>
      <dd>link(files, sub-name, flag)  </dd>
      <dd>lst=link('show')  </dd>
      <dd>// Link extensions for machines using ``dlopen''   </dd>
      <dd>// (sun-solaris/linux-elf/alpha/hppa)  </dd>
      <dd>x=link(files [, sub-names,flag]);  </dd>
      <dd>link(x , sub-names [, flag]);  </dd>
      <dd>ulink(x)  </dd>
    </dl>
    <H3>PARAMETERS</H3>
    <ul>
      <ul>
  <li>
          <tt>
            <b>files  </b>
          </tt>
    : a character string or a vector of character strings. <tt>
            <b>ld</b>
          </tt> files used to define the new entry point (compiled routines, user libraries, system libraries,..) 
  </li>
  <li>
          <tt>
            <b>sub-name  </b>
          </tt>
    : a character string. Name of the entry point in <tt>
            <b>files</b>
          </tt> to be linked.
  </li>
  <li>
          <tt>
            <b>sub-names  </b>
          </tt>
    : a character string or a vector of character strings . Name of the entry points in <tt>
            <b>files</b>
          </tt> to be linked.
  </li>
  <li>
          <tt>
            <b>x  </b>
          </tt>
    : an integer which gives the id of a shared library linked into Scilab with a previous call to <tt>
            <b>link</b>
          </tt>. 
  </li>
  <li>
          <tt>
            <b>flag  </b>
          </tt>
    : character string <tt>
            <b>'f'</b>
          </tt> or <tt>
            <b>'c'</b>
          </tt> for Fortran (default) or C code.
  </li>
  <li>
          <tt>
            <b>names  </b>
          </tt>
    : a vector of character string. Names of dynamically linked entry points.
  </li>
 </ul>
    </ul>
    <H3>DESCRIPTION</H3>
    <ul>
  <p>
    <tt>
          <b>link</b>
        </tt> is a dynamic link facility: this command allows to add new compiled
    Fortran or C routines to Scilab executable code.
    Linked routines can be called interactively by the function <tt>
          <b>fort</b>
        </tt>.
    Linked routines can also be used as "external" for e.g. 
    non linear problem solvers (<tt>
          <b>ode</b>
        </tt>, <tt>
          <b>optim</b>
        </tt>, <tt>
          <b>intg</b>
        </tt>, 
    <tt>
          <b>dassl</b>
        </tt>...). Here are some examples:
  </p>
  <p>
    The command <tt>
          <b>link('foo.o','foo','f')</b>
        </tt> links the Fortran 
    object file <tt>
          <b>foo.o</b>
        </tt> with the entry point <tt>
          <b>foo</b>
        </tt>.
  </p>
  <p>
    The command <tt>
          <b>link('foo.o','foo','c')</b>
        </tt> links the C
    object file <tt>
          <b>foo.o</b>
        </tt> with the entry point <tt>
          <b>foo</b>
        </tt>.
  </p>
  <p>
    The command <tt>
          <b>link('SCIDIR/libs/calelm.a','dcopy')</b>
        </tt> links the 
    Fortran routine <tt>
          <b>dcopy</b>
        </tt> in the library <tt>
          <b>calelm.a</b>
        </tt>.
  </p>
  <p>
    A routine can be linked several times and can be unlinked with
    <tt>
          <b>ulink</b>
        </tt>. Note that, on some architectures (the ones on which
    <tt>
          <b>ulink</b>
        </tt> exists) when a routine is linked several times, all 
    the version are kept inside Scilab. 
  </p>
  <p>
    Used with no arguments, <tt>
          <b>link()</b>
        </tt> returns the current linked routines.
  </p>
  <p>
    If Scilab is compiled with static link (this is the default for
    SystemV machines) you may have to include the system libraries in the 
    "link" command.
  </p>
  <p>
    For example, if <tt>
          <b>foo.o</b>
        </tt> defines the object code of a routine named 
    <tt>
          <b>foo</b>
        </tt>, you will use <tt>
          <b>link</b>
        </tt> in one the following way: 
  </p>
  <pre>
link('foo.o','foo').
link('foo.o -lm -lc','foo','c').
link('foo.o -lfor -lm -lc','foo').
link('foo.o -lftn -lm -lc','foo').
link('foo.o -L/opt/SUNWspro/SC3.0/lib/lib77 -lm -lc','foo')
   </pre>
  <p>
    If Scilab compiled with the "shared" option, the first example can be used
    even if a warning for unresolved references is issued.
  </p>
  <p>
    (Experienced) users may also <tt>
          <b>link</b>
        </tt> a new Scilab interface routine 
    to add a set of new functions. 
    See <tt>
          <b>Intersci</b>
        </tt> documentation for interface generation and
    <tt>
          <b>addinter</b>
        </tt> function.
  </p>
  </ul>
    <H3>REMARKS</H3>
    <ul>
      <li>IBM:
For IBM-RS6000 only one program can be dynamically linked.  

  </li>
      <li>Demo:
When running a demo, you may have some trouble with the link due to slight differences between systems. In this case, you modify the demo by adding the needed libraries in the link command. 

  </li>
      <li>dlopen:
For machines using dlopen functionality extended command can be used. a call to  returns an integer which gives the id of the shared  library which is loaded into Scilab. This number can then be used as the first argument of the link function in order to link additional  function from the linked shared library. The shared library is  removed with the  command.  for example to link functions  and  form binary file   the two following command can be used :

  </li>
      <pre>
link('test.o',['f','g'])
   </pre>
      <p>
    or
  </p>
      <pre>
x=link('test.o','f');
link(x,'g');
   </pre>
      <p>
    But 
  </p>
      <pre>
link('test.o','f');
link('test.o','g');
   </pre>
      <p>
    will also work but <tt>
          <b>f</b>
        </tt> and <tt>
          <b>g</b>
        </tt> will be loaded from two different shared libraries and won't be able to share data.  
  </p>
      <li>show:
The command  will report information about  linked shared libraries and linked functions. The return value of the function  is  or .  If the return value is  then the extended calling sequence  described as  are  accepted.  

  </li>
      <li>unlink :
(dlopen version) If the function  is changed and one wants to link  the new version, it is necessary to use unlink to get rid of  previous loaded versions of the function  

  </li>
      <pre>
x=link('test.o','f');
// if I need to reload a new definition of f a call to unlink
// is necessary.
ulink(x);
link('test.o','f');
   </pre>
      <p>
    
  </p>
      <li>scilab symbols:
In order to load a symbol from the Scilab code on can use 

  </li>
      <pre>
link("Scilab",['Scilab-entry-point'])
   </pre>
      <p>
    This does not work on all architectures. On some machines, on can  link a Scilab internal function after a first call to link ( with  a default binary file )
  </p>
      <pre>
link("test.o",['Scilab-entry-point'])
   </pre>
      <p>
    Note that with <tt>
          <b>dld</b>
        </tt> (Linux machine aout) you can use an empty string 
  </p>
      <pre>
link(" ",['Scilab-entry-point'])
   </pre>
    </ul>
    <H3>SEE ALSO</H3>
    <p>
      <ul>
        <a href="../programming/fort.html">
          <tt>
            <b>fort</b>
          </tt>
        </a>
        <a href="c_link.html">
          <tt>
            <b>c_link</b>
          </tt>
        </a>
        <a href="../functions/addinter.html">
          <tt>
            <b>addinter</b>
          </tt>
        </a>
      </ul>
    </p>
  </body>
</html>